module.exports = new function(){
	var a = this
	this.obstacles = []
	this.init = function(player,stage,renderer,ground){
		a.player = player
		a.stage = stage
		a.renderer = renderer
		a.ground = ground
	}
	this.create = function(){
		var sprite = a.player
		var renderer = a.renderer
		var stage = a.stage
		var ground = a.ground

		var shapes = require("./../drawing/shapes")
		var loc = renderer.width
		var height = renderer.height;
		var obstacle = new PIXI.Sprite(shapes.rectangle(20,1,"#444444"))
		obstacle.x = loc
		obstacle.height=Math.random()*(height-ground.height-sprite.height*5)
		var counter = new PIXI.Sprite(shapes.rectangle(20,1,"#444444"))
		counter.x = loc
		counter.y = obstacle.height+sprite.height*5
		counter.height = height - obstacle.height
		var ct = new PIXI.Container();
		ct.scale.x = -1;
		ct.x = a.renderer.width
		ct.width = 20
		ct.addChild(counter);
      ct.addChild(obstacle);
      stage.addChild(ct);
	}
	this.move = function(){
		var sprite = a.player
		var renderer = a.renderer
		var stage = a.stage
		var ground = a.ground
		var collide = require("./../physics/collide")
		a.stage.children.forEach(function(val,index){
			console.log(val.y)
			val.x-=2
			val.children.forEach(function(obstacle){
			if(collide(obstacle,sprite)){
					console.log("doot")				
				}
							
				
			})
			if(obstacle.x+obstacle.width<0){
				}
      })
		}
	}
